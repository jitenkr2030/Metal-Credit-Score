// Multi-language translations for MCS website
const translations = {
    en: {
        // Navigation
        'nav.home': 'Home',
        'nav.features': 'Features',
        'nav.pricing': 'Pricing',
        'nav.getStarted': 'Get Started',
        'nav.learn': 'Learn',
        'nav.api': 'API',
        'nav.dashboard': 'Dashboard',
        
        // Hero Section
        'hero.title': 'India\'s First Asset-Backed Credit Score',
        'hero.subtitle': 'Revolutionary credit scoring based on real collateral assets: Gold (BGT), Silver (BST), Platinum (BPT), and BINR stablecoin holdings instead of traditional credit history.',
        'hero.ctaPrimary': 'Get Started Today',
        'hero.ctaSecondary': 'Learn More',
        
        // Features
        'features.title': 'Advanced Features',
        'features.subtitle': 'Cutting-edge technology meets financial innovation.',
        'features.aiScoring': 'AI-Powered Scoring Engine',
        'features.aiScoringDesc': 'Advanced machine learning algorithms analyze your asset portfolio in real-time, considering market volatility, asset correlation, and economic indicators.',
        'features.blockchain': 'Blockchain Security',
        'features.blockchainDesc': 'Your asset data is secured using advanced blockchain technology, ensuring transparency, immutability, and complete security.',
        'features.tracking': 'Real-Time Portfolio Tracking',
        'features.trackingDesc': 'Monitor your asset portfolio with live updates, performance metrics, and credit score changes.',
        'features.risk': 'Comprehensive Risk Assessment',
        'features.riskDesc': 'Advanced risk modeling considers market volatility, liquidity constraints, and correlation analysis.',
        
        // Education
        'edu.title': 'Master Asset-Backed Credit Scoring',
        'edu.subtitle': 'Comprehensive learning modules to understand how MCS revolutionizes credit assessment.',
        'edu.individual': 'Individual Investor',
        'edu.institution': 'Financial Institution',
        'edu.developer': 'Developer/Technical',
        'edu.continue': 'Continue Learning',
        'edu.startPath': 'Start Learning Path',
        
        // API
        'api.title': 'MCS API Marketplace',
        'api.subtitle': 'Complete developer resources for seamless integration.',
        'api.tryNow': 'Try API Now',
        'api.viewDocs': 'View Docs',
        'api.playground': 'Interactive API Playground',
        'api.playgroundDesc': 'Test MCS API endpoints directly in your browser.',
        
        // Common
        'common.learnMore': 'Learn More',
        'common.getStarted': 'Get Started',
        'common.tryNow': 'Try Now',
        'common.viewDocs': 'View Documentation',
        'common.contactUs': 'Contact Us',
        'common.documentation': 'Documentation',
        'common.support': 'Support',
        'common.about': 'About',
        'common.careers': 'Careers',
        'common.privacy': 'Privacy Policy',
        'common.terms': 'Terms of Service'
    },
    
    hi: {
        // Navigation - Hindi
        'nav.home': 'होम',
        'nav.features': 'फीचर्स',
        'nav.pricing': 'प्राइसिंग',
        'nav.getStarted': 'शुरू करें',
        'nav.learn': 'सीखें',
        'nav.api': 'API',
        'nav.dashboard': 'डैशबोर्ड',
        
        // Hero Section - Hindi
        'hero.title': 'भारत का पहला एसेट-आधारित क्रेडिट स्कोर',
        'hero.subtitle': 'पारंपरिक क्रेडिट इतिहास के बजाय वास्तविक कोलैटरल एसेट्स पर आधारित क्रांतिकारी क्रेडिट स्कोरिंग: गोल्ड (BGT), सिल्वर (BST), प्लैटिनम (BPT), और BINR स्टेबलकॉइन होल्डिंग्स।',
        'hero.ctaPrimary': 'आज ही शुरू करें',
        'hero.ctaSecondary': 'और जानें',
        
        // Features - Hindi
        'features.title': 'उन्नत फीचर्स',
        'features.subtitle': 'नवाचारशील तकनीक वित्तीय नवाचार से मिलती है।',
        'features.aiScoring': 'AI-संचालित स्कोरिंग इंजन',
        'features.aiScoringDesc': 'उन्नत मशीन लर्निंग एल्गोरिदम आपके एसेट पोर्टफोलियो का वास्तविक समय में विश्लेषण करते हैं, बाजार अस्थिरता, एसेट सहसंबंध और आर्थिक संकेतकों को ध्यान में रखते हुए।',
        'features.blockchain': 'ब्लॉकचेन सुरक्षा',
        'features.blockchainDesc': 'आपके एसेट डेटा को उन्नत ब्लॉकचेन तकनीक का उपयोग करके सुरक्षित किया गया है, पारदर्शिता, अपरिवर्तनीयता और पूर्ण सुरक्षा सुनिश्चित करते हुए।',
        'features.tracking': 'वास्तविक समय पोर्टफोलियो ट्रैकिंग',
        'features.trackingDesc': 'लाइव अपडेट, प्रदर्शन मेट्रिक्स और क्रेडिट स्कोर परिवर्तनों के साथ अपने एसेट पोर्टफोलियो की निगरानी करें।',
        'features.risk': 'व्यापक जोखिम मूल्यांकन',
        'features.riskDesc': 'उन्नत जोखिम मॉडलिंग बाजार अस्थिरता, तरलता बाधाओं और सहसंबंध विश्लेषण को ध्यान में रखती है।',
        
        // Education - Hindi
        'edu.title': 'एसेट-आधारित क्रेडिट स्कोरिंग में महारत हासिल करें',
        'edu.subtitle': 'MCS द्वारा क्रेडिट आकलन में क्रांति लाने को समझने के लिए व्यापक शिक्षण मॉड्यूल।',
        'edu.individual': 'व्यक्तिगत निवेशक',
        'edu.institution': 'वित्तीय संस्थान',
        'edu.developer': 'डेवलपर/तकनीकी',
        'edu.continue': 'सीखना जारी रखें',
        'edu.startPath': 'सीखने की शुरुआत करें',
        
        // API - Hindi
        'api.title': 'MCS API मार्केटप्लेस',
        'api.subtitle': 'निर्बाध एकीकरण के लिए संपूर्ण डेवलपर संसाधन।',
        'api.tryNow': 'API आज़माएं',
        'api.viewDocs': 'दस्तावेज़ देखें',
        'api.playground': 'इंटरैक्टिव API प्लेग्राउंड',
        'api.playgroundDesc': 'अपने ब्राउज़र में सीधे MCS API एंडपॉइंट्स का परीक्षण करें।',
        
        // Common - Hindi
        'common.learnMore': 'और जानें',
        'common.getStarted': 'शुरू करें',
        'common.tryNow': 'अभी आज़माएं',
        'common.viewDocs': 'दस्तावेज़ देखें',
        'common.contactUs': 'संपर्क करें',
        'common.documentation': 'दस्तावेज़ीकरण',
        'common.support': 'सहायता',
        'common.about': 'हमारे बारे में',
        'common.careers': 'करियर',
        'common.privacy': 'गोपनीयता नीति',
        'common.terms': 'सेवा की शर्तें'
    },
    
    ta: {
        // Navigation - Tamil
        'nav.home': 'முகப்பு',
        'nav.features': 'அம்சங்கள்',
        'nav.pricing': 'விலை நிர்ணயம்',
        'nav.getStarted': 'தொடங்கு',
        'nav.learn': 'கற்றுக்கொள்',
        'nav.api': 'API',
        'nav.dashboard': 'டாஷ்போர்டு',
        
        // Hero Section - Tamil
        'hero.title': 'இந்தியாவின் முதல் சொத்து-அடிப்படையிலான கடன் மதிப்பெண்',
        'hero.subtitle': 'பாரம்பரிய கடன் வரலாற்றுக்கு பதிலாக உண்மையான பிணைண்டு சொத்துக்களின் அடிப்படையில் புரட்சிகரமான கடன் மதிப்பிடல்: தங்கம் (BGT), வெள்ளி (BST), பிளாட்டினம் (BPT), மற்றும் BINR நிலையான நாணய வைப்புகள்.',
        'hero.ctaPrimary': 'இன்றே தொடங்குங்கள்',
        'hero.ctaSecondary': 'மேலும் அறிக',
        
        // Common - Tamil
        'common.learnMore': 'மேலும் அறிக',
        'common.getStarted': 'தொடங்கு',
        'common.tryNow': 'இப்போது முயற்சி செய்',
        'common.viewDocs': 'ஆவணங்களைப் பார்'
    },
    
    te: {
        // Navigation - Telugu
        'nav.home': 'హోమ్',
        'nav.features': 'లక్షణాలు',
        'nav.pricing': 'ధరలు',
        'nav.getStarted': 'ప్రారంభించండి',
        'nav.learn': 'తెలుసుకోండి',
        'nav.api': 'API',
        'nav.dashboard': 'డాష్బోర్డ్',
        
        // Hero Section - Telugu
        'hero.title': 'భారతదేశపు మొదటి సంపద-ఆధారిత క్రెడిట స్కోర్',
        'hero.subtitle': 'సాంప్రదాయక క్రెడిట చరిత్రకు బదులుగా నిజమైన భరవాలు సంపదల ఆధారంగా విప్లవాత్మక క్రెడిట మూల్యాంకనం: బంగారు (BGT), వెండి (BST), ప్లాటినం (BPT), మరియు BINR స్థిర నాణేల వాటాలు.',
        'hero.ctaPrimary': 'ఈ రోజే ప్రారంభించండి',
        'hero.ctaSecondary': 'మరిన్ని తెలుసుకోండి',
        
        // Common - Telugu
        'common.learnMore': 'మరిన్ని తెలుసుకోండి',
        'common.getStarted': 'ప్రారంభించండి',
        'common.tryNow': 'ఇప్పుడు ప్రయత్నించండి',
        'common.viewDocs': 'పత్రాలను చూడండి'
    },
    
    bn: {
        // Navigation - Bengali
        'nav.home': 'হোম',
        'nav.features': 'বৈশিষ্ট্য',
        'nav.pricing': 'মূল্য',
        'nav.getStarted': 'শুরু করুন',
        'nav.learn': 'শিখুন',
        'nav.api': 'API',
        'nav.dashboard': 'ড্যাশবোর্ড',
        
        // Hero Section - Bengali
        'hero.title': 'ভারতের প্রথম সম্পদ-ভিত্তিক ক্রেডিট স্কোর',
        'hero.subtitle': 'প্রচলিত ক্রেডিট ইতিহাসের পরিবর্তে সত্যিকারের নিশ্চয়তা সম্পদের ভিত্তিতে বিপ্লবী ক্রেডিট মূল্যায়ন: সোনা (BGT), রুপা (BST), প্লাটিনাম (BPT), এবং BINR স্থিতিকনিন মুদ্রা ধারণ।',
        'hero.ctaPrimary': 'আজই শুরু করুন',
        'hero.ctaSecondary': 'আরও জানুন',
        
        // Common - Bengali
        'common.learnMore': 'আরও জানুন',
        'common.getStarted': 'শুরু করুন',
        'common.tryNow': 'এখনই চেষ্টা করুন',
        'common.viewDocs': 'ডকুমেন্ট দেখুন'
    },
    
    mr: {
        // Navigation - Marathi
        'nav.home': 'मुखपृष्ठ',
        'nav.features': 'वैशिष्ट्ये',
        'nav.pricing': 'किंमत',
        'nav.getStarted': 'सुरू करा',
        'nav.learn': 'शिका',
        'nav.api': 'API',
        'nav.dashboard': 'डॅशबोर्ड',
        
        // Hero Section - Marathi
        'hero.title': 'भारताचे पहिले मालमत्ता-आधारित क्रेडिट स्कोर',
        'hero.subtitle': 'पारंपारिक क्रेडिट इतिहासाऐवजी वास्तविक तारण मालमत्तावर आधारित क्रांतिकारी क्रेडिट मूल्यांकन: सोने (BGT), चांदी (BST), प्लॅटिनम (BPT), आणि BINR स्टेबलकॉइन होल्डिंग्ज.',
        'hero.ctaPrimary': 'आजच सुरू करा',
        'hero.ctaSecondary': 'आणखी शिका',
        
        // Common - Marathi
        'common.learnMore': 'आणखी शिका',
        'common.getStarted': 'सुरू करा',
        'common.tryNow': 'आताच पहा',
        'common.viewDocs': 'कागदपत्रे पहा'
    }
};

// Language detection and management
class LanguageManager {
    constructor() {
        this.currentLanguage = localStorage.getItem('mcs-language') || this.detectLanguage();
        this.init();
    }
    
    detectLanguage() {
        // Check URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const langParam = urlParams.get('lang');
        if (langParam && translations[langParam]) {
            return langParam;
        }
        
        // Check browser language
        const browserLang = navigator.language.split('-')[0];
        if (translations[browserLang]) {
            return browserLang;
        }
        
        // Check localStorage
        const savedLang = localStorage.getItem('mcs-language');
        if (savedLang && translations[savedLang]) {
            return savedLang;
        }
        
        // Default to English
        return 'en';
    }
    
    init() {
        this.updateLanguage(this.currentLanguage);
        this.setupEventListeners();
    }
    
    setupEventListeners() {
        // Language selector buttons
        document.addEventListener('click', (e) => {
            if (e.target.matches('[data-lang]')) {
                e.preventDefault();
                const lang = e.target.getAttribute('data-lang');
                this.changeLanguage(lang);
            }
        });
        
        // Keyboard shortcuts for language switching
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey) {
                const langs = Object.keys(translations);
                const currentIndex = langs.indexOf(this.currentLanguage);
                const nextIndex = (currentIndex + 1) % langs.length;
                this.changeLanguage(langs[nextIndex]);
            }
        });
    }
    
    changeLanguage(lang) {
        if (!translations[lang]) {
            console.warn(`Language ${lang} not supported`);
            return;
        }
        
        this.currentLanguage = lang;
        localStorage.setItem('mcs-language', lang);
        
        // Update URL without reload
        const url = new URL(window.location);
        url.searchParams.set('lang', lang);
        window.history.replaceState({}, '', url);
        
        this.updateLanguage(lang);
        this.updateUIElements(lang);
        
        // Dispatch custom event for language change
        window.dispatchEvent(new CustomEvent('languageChanged', {
            detail: { language: lang }
        }));
    }
    
    updateLanguage(lang) {
        // Update document language
        document.documentElement.lang = lang;
        
        // Update language selector button
        const languageButton = document.querySelector('.language-btn');
        if (languageButton) {
            const languageNames = {
                'en': 'English',
                'hi': 'हिन्दी (Hindi)',
                'ta': 'தமிழ் (Tamil)',
                'te': 'తెలుగు (Telugu)',
                'bn': 'বাংলা (Bengali)',
                'mr': 'मराठी (Marathi)'
            };
            languageButton.innerHTML = `<i class="fas fa-globe me-1"></i>${languageNames[lang] || lang}`;
        }
    }
    
    updateUIElements(lang) {
        const elements = document.querySelectorAll('[data-translate]');
        elements.forEach(element => {
            const key = element.getAttribute('data-translate');
            const translation = this.getTranslation(key, lang);
            if (translation) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = translation;
                } else {
                    element.textContent = translation;
                }
            }
        });
        
        // Update meta tags
        this.updateMetaTags(lang);
    }
    
    updateMetaTags(lang) {
        const metaTags = {
            'en': {
                title: 'Metal Credit Score (MCS) - India\'s First Asset-Backed Credit Scoring',
                description: 'Revolutionary credit scoring based on real collateral assets instead of traditional credit history.'
            },
            'hi': {
                title: 'Metal Credit Score (MCS) - भारत का पहला एसेट-आधारित क्रेडिट स्कोरिंग',
                description: 'पारंपरिक क्रेडिट इतिहास के बजाय वास्तविक एसेट्स पर आधारित क्रांतिकारी क्रेडिट स्कोरिंग।'
            },
            'ta': {
                title: 'Metal Credit Score (MCS) - இந்தியாவின் முதல் சொத்து-அடிப்படையிலான கடன் மதிப்பெண்',
                description: 'பாரம்பரிய கடன் வரலாற்றுக்கு பதிலாக உண்மையான பிணைண்டு சொத்துக்களின் அடிப்படையில் புரட்சிகரமான கடன் மதிப்பிடல்।'
            },
            'te': {
                title: 'Metal Credit Score (MCS) - భారతదేశపు మొదటి సంపద-ఆధారిత క్రెడిట స్కోర్',
                description: 'సాంప্রదాయక క్రెडిట చరిత్రకు బదులుగా నిజమైన భరవాలు సంపదల ఆధారంగా విప్లవాత్మక క్రెडిట మూల్యాంకనం।'
            },
            'bn': {
                title: 'Metal Credit Score (MCS) - ভারতের প্রথম সম্পদ-ভিত্তিক ক্রেডিট স্কোর',
                description: 'প্রচলিত ক্রেডিট ইতিহাসের পরিবর্তে সত্যিকারের নিশ্চয়তা সম্পদের ভিত্তিতে বিপ্লবী ক্রেডিট মূল্যায়ন।'
            },
            'mr': {
                title: 'Metal Credit Score (MCS) - भारताचे पहिले मालमत्ता-आधारित क्रेडिट स्कोर',
                description: 'पारंपारिक क्रेडिट इतिहासाऐवजी वास्तविक तारण मालमत्तावर आधारित क्रांतिकारी क्रेडिट मूल्यांकन।'
            }
        };
        
        const meta = metaTags[lang];
        if (meta) {
            document.title = meta.title;
            
            // Update meta description
            let descMeta = document.querySelector('meta[name="description"]');
            if (!descMeta) {
                descMeta = document.createElement('meta');
                descMeta.setAttribute('name', 'description');
                document.head.appendChild(descMeta);
            }
            descMeta.setAttribute('content', meta.description);
        }
    }
    
    getTranslation(key, lang) {
        const keys = key.split('.');
        let value = translations[lang];
        
        for (const k of keys) {
            if (value && typeof value === 'object' && k in value) {
                value = value[k];
            } else {
                return null;
            }
        }
        
        return typeof value === 'string' ? value : null;
    }
    
    translate(key, fallback = '') {
        const translation = this.getTranslation(key, this.currentLanguage);
        return translation || fallback || key;
    }
    
    // Convenience methods for common translations
    t(key, fallback = '') {
        return this.translate(key, fallback);
    }
}

// RTL Support for Arabic and other RTL languages
function isRTL(lang) {
    return ['ar', 'he', 'fa', 'ur'].includes(lang);
}

function applyRTL(lang) {
    const isRtl = isRTL(lang);
    document.body.dir = isRtl ? 'rtl' : 'ltr';
    document.body.className = isRtl ? 'rtl' : 'ltr';
}

// Initialize language manager when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
    window.languageManager = new LanguageManager();
    
    // Add RTL support
    window.addEventListener('languageChanged', (e) => {
        applyRTL(e.detail.language);
    });
    
    // Apply initial RTL if needed
    applyRTL(window.languageManager.currentLanguage);
});

// Export for use in other scripts
window.translations = translations;
window.LanguageManager = LanguageManager;